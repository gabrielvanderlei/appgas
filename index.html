<meta name="viewport" content="width=device-width, user-scalable=no">
<script src="https://www.gstatic.com/firebasejs/5.5.0/firebase.js"></script>
<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBqL1FecjFVvhXZJevbJn-SkZ__DxQxesc",
    authDomain: "appgas-d7647.firebaseapp.com",
    databaseURL: "https://appgas-d7647.firebaseio.com",
    projectId: "appgas-d7647",
    storageBucket: "appgas-d7647.appspot.com",
    messagingSenderId: "715577686349"
  };
  firebase.initializeApp(config);
  
  function criarUsuario(){
    firebase.auth().createUserWithEmailAndPassword(document.getElementById('emailc').value,document.getElementById('senhac').value)
      .then(function(data){
        db.collection("users").add({
            email: document.getElementById('emailc').value
        })
        .then(function(docRef) {
            console.log("Document written with ID: ", docRef.id);
        })
        .catch(function(error) {
            console.error("Error adding document: ", error);
        });
    })
      .catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      alert(errorMessage)
    });
  }
  
  function logarUsuario(){
      firebase.auth().signInWithEmailAndPassword(document.getElementById('emaill').value,document.getElementById('senhal').value)
        .catch(function(error) {
      // Handle Errors here.
      var errorCode = error.code;
      var errorMessage = error.message;
      alert(errorMessage);
    });
    
  }
  
    function show(id){
      $('.section').css('display', 'none');
      $('#'+id).css('display','block');
    }
  

    // Initialize Cloud Firestore through Firebase
    var db = firebase.firestore();
    
  firebase.auth().onAuthStateChanged(function(user) {
    if (user) {
      // User is signed in.
      var displayName = user.displayName;
      var email = user.email;
      var emailVerified = user.emailVerified;
      var photoURL = user.photoURL;
      var isAnonymous = user.isAnonymous;
      var uid = user.uid;
      var providerData = user.providerData;
      // ...
      
      document.getElementById('username').innerHTML = email;
      
      show('painel');
    } else {
      // User is signed out.
      // ...
      show('main');
    }
  });
  
  function logOut(){
    firebase.auth().signOut().then(function() {
      // Sign-out successful.
      alert('Deslogado');
    }).catch(function(error) {
      // An error happened.
      alert('Algum erro ocorreu');
    });
  }
    
  
</script>
<style>
  .section{display:none;position:fixed;width:100%;height:100%;font-family:Segoe UI; color black;font-size:20px;text-align:center;top:0;left:0}
  .options{padding:30% 0;}
  .button{background:rgb(200, 0, 0);color:white;border-radius:300px;width:200px;padding:9px 15px; margin: 20px 0px;display:inline-block;}
  .text{padding:9px;border:1px solid rgb(230, 230, 230);border-radius:30px;}
  
</style>

<div id='none'></div>

<div class='section' id='main'>
  <h1>Appgas</h1>
  <h3>Saiba quanto gás seu botijão possui pelo aplicativo.</h3>
  <div class='options'>
    <div class='button' onclick="show('logar')">Já possuo uma conta</div>
    <div class='button' onclick="show('criar')">Registrar-se</div>
  </div>
</div>

<div class='section' id='criar'>
  <input type='email' class='text'  id='emailc' placeholder='Email' />
  <input type='password' class='text'  id='senhac' placeholder='Senha' />
  <input type='button' onclick='criarUsuario()' class='button' value='Criar usuário' />
</div>

<div class='section' id='logar'>
  <input type='email' id='emaill' class='text'  placeholder='Email' />
  <input type='password' id='senhal' class='text'  placeholder='Senha' />
  <input type='button' onclick='logarUsuario()' class='button'  value='Entrar na conta' />
</div>

<div class='section' id='painel'>
  <h1>Bem vindo <span id='username'></span></h1>
  <input type='button' onclick='logOut()' class='button'  value='Sair da conta' />
</div>
